<header class="row">
  <div class="col-sm-5">
    <h3><%= t('History') %></h3>
  </div>
  <% if @messages.size > 0 %>
    <div class="col-sm-4">
      <%= erb :_paging, :locals => { :url => "#{root_path}history#@name" } %>
    </div>
  <% end %>
</header>

<% if @messages.size > 0 %>
  <table class="table table-striped table-bordered table-white" style="width: 100%; margin: 0; table-layout:fixed;">
    <thead>
      <th style="width: 25%"><%= t('WorkerArgs') %></th>
      <th style="width: 10%"><%= t('Queue') %></th>
      <th style="width: 15%"><%= t('StartedAt') %></th>
      <th style="width: 50%"><%= t('Processor') %></th>
    </thead>
    <% @messages.each do |msg| %>
      <tr>
        <td style="overflow: hidden; text-overflow: ellipsis;">
          <%= msg['worker'] %>
          <br />
          <%= msg['payload']['args'].inspect[0..100] %>
        </td>
        <td><%= msg['queue'] %></td>
        <td>
          <%= relative_time(Time.parse(msg['started_at'])) %>
        </td>
        <td style="overflow: auto; padding: 10px;">
          <%= t('Processor') %>: <%= msg['processor'] %>
        </td>
      </tr>
    <% end %>
  </table>
  <div class="row">
    <div class="col-sm-5">
      <form class="form-inline" action="<%= "#{root_path}history/remove" %>" method="post" style="margin: 20px 0">
        <input class="btn btn-danger btn-xs" type="submit" name="delete" value="Clear All" />
        <label class="checkbox">
          <input type="checkbox" name="counter" value="true" />
          <%= t('ResetHistoryCounter') %>
        </label>
      </form>
    </div>
  </div>
<% else %>
  <div class="alert alert-success"><%= t('NoJobsFound') %></div>
<% end %>
